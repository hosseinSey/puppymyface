{% extends "base.html"%}

{% block content %}
	<div class="col-lg-12">
		<img src="{{ url_for('send_file_from_cache', filename=image) }}" alt={{ image }} class="img-responsive img-thumbnail"  style="max-width: 65%">
	</div> 
	<br /> 

	<!-- {# Ladda for Bootstrap: http://msurguy.github.io/ladda-bootstrap/  #} -->
	<link rel="stylesheet" href="{{ url_for('get_static_file', filename = 'ladda-themeless.min.css') }}">
	<script src="{{ url_for('get_static_file', filename = 'spin.min.js') }}"></script>
	<script src="{{ url_for('get_static_file', filename = 'ladda.min.js') }}"></script>
	
	<script>
		$(function() {
			$('#form-submit').click(function(e){
			 	var l = Ladda.create(this);
			 	l.start();
			 	function post_and_wait(){
				 	$.post("{{ url_for('is_recognized') }}", 
				 	    { filename: '{{image}}' }
				 	).done(function(response){
				    	if (response.status === 'done') { 
				    		l.stop();
						    window.location = "{{url_for('result_page', filename = image)}}";
				    	} else {
				    		setInterval(post_and_wait(), 400)
				    	}
					  });
			 	}
			 	post_and_wait();
			});
		});	
	</script>
			
	<div class="row">
		<div class="col-sm-12">
		    <p class="help-block">{{ msg | safe }}</p>
		    <br />
		    <a id="form-submit" class="btn btn-primary btn-lg ladda-button" data-style="zoom-in" data-size="l"><span class="ladda-label">Puppy Me!</span></a>
		    <p class="help-block" id="help_message"></p>
		</div>
	</div>
	

{% endblock %} 


